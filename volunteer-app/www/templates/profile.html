<ion-view title="My Profile">

	<organisation-subheader></organisation-subheader>

    <ion-content padding="true" class="has-header has-subheader-organisation profile">
    	<div class="padding-left padding-right">

	    	<!-- form#register -->
	    	<form id="user" name="user" class="list" ng-submit="saveUser(user)" novalidate>
	    	    <ion-list>

	    	        <!-- name -->
	    	        <label class="item item-input">
	    	            <span class="input-label">Full name</span>
	    	            <input type="text" name="name" id="name" placeholder="E.g. Jon Smith" ng-model="formData.name" required>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.name.$invalid && formSubmitted" for="name">
	    	            Please enter your full name
	    	        </label>
	    	        <!-- /name -->

	    	        <!-- email -->
	    	        <label class="item item-input">
	    	            <span class="input-label">Email</span>
	    	            <input type="email" name="email" id="email" placeholder="E.g. jon@smith.com" ng-model="formData.email" ng-pattern="/^[\w.%+\-]+@[\w.\-]+\.[A-Za-z]{2,6}$/" required>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.email.$invalid && formSubmitted" for="email">
	    	            Please enter a valid email address
	    	        </label>
	    	        <!-- /email -->

	    	        <div class="spacer-20"></div>

					<ion-checkbox class="item-checkbox-right" ng-model="changePassword">Change password</ion-checkbox>

	    	        <!-- password -->     
	    	        <label class="item item-input" ng-if="changePassword">
	    	            <span class="input-label">New password</span>
	    	            <input type="password" name="password" id="password" placeholder="Enter password" ng-model="formData.password" minlength="6" required>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.password.$invalid && formSubmitted" for="password">
	    	            Please enter at least 6 characters
	    	        </label>
	    	        <!-- /password -->

	    	        <div class="spacer-20"></div>

	    	        <!-- phone -->
	    	        <label class="item item-input">
	    	            <span class="input-label">Phone</span>
	    	            <input class="text-right" type="tel" name="phone" id="phone" placeholder="E.g. 07979799799" ng-model="formData.phone" minlength="6" maxlength="15" ng-pattern="/^([0-9|+|*|#|\-]+)$/" required>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.phone.$invalid && formSubmitted" for="phone">
	    	            Please enter only digits or these symbols: *+#- (between 6 and 15 characters in length)
	    	        </label>
	    	        <!-- /phone -->

	    	        <!-- year of birth -->
	    	        <label class="item item-select">
	    	            <span class="input-label">Year of birth</span>
	    	            <select ng-model="formData.yearOfBirth" ng-options="option for option in years track by option" name="yearOfBirth" id="yearOfBirth" required>
	    	                <option value="">Select year</option>
	    	                <!--  -->
	    	            </select>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.yearOfBirth.$invalid && formSubmitted" for="yearOfBirth">
	    	            Please select your year of birth
	    	        </label>
	    	        <!-- /year of birth -->

	    	        <!-- gender -->
	    	        <label class="item item-select" ng-class="{'item-select-disabled': gendersDisabled}">
	    	            <span class="input-label">Gender</span>
	    	            <select ng-model="formData.gender" ng-options="option.name for option in genders track by option.id" name="gender" id="gender" ng-disabled="gendersDisabled" required>
	    	                <option value="">Select gender</option>
	    	                <!--  -->
	    	            </select>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.gender.$invalid && formSubmitted" for="gender">
	    	            Please select your gender
	    	        </label>
	    	        <!-- /gender -->

	    	        <div class="spacer-20"></div> 

	    	        <!-- region -->
	    	        <label class="item item-select" ng-class="{'item-select-disabled': regionsDisabled}">
	    	            <span class="input-label">Region</span>
	    	            <select ng-model="formData.region" ng-options="option.name for option in regions track by option.id" name="region" id="region" ng-change="populateOrganisations(formData.region.id)" ng-disabled="regionsDisabled" required>
	    	                <option value="">Select region</option>
	    	                <!--  -->
	    	            </select>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.region.$invalid && formSubmitted" for="region">
	    	            Please select a region
	    	        </label>
	    	        <!-- /region -->

	    	        <!-- organisation -->
	    	        <label class="item item-select" ng-class="{ 'item-select-disabled': organisationsDisabled }">
	    	            <span class="input-label">Organisation</span>
	    	            <select ng-model="formData.organisation" ng-options="option.name for option in organisations track by option.id" name="organisation" id="organisation" ng-disabled="organisationsDisabled" required>
	    	                <option value="">Select organisation</option>
	    	                <!--  -->
	    	            </select>
	    	        </label>
	    	        <label class="error block text-right padding assertive" ng-show="user.organisation.$invalid && formSubmitted" for="organisation">
	    	            Please select an organisation
	    	        </label>
	    	        <!-- /organisation -->

	    	    </ion-list>

	    	    <div class="spacer-10"></div>

	    	    <!-- buttons -->
	    	    <button type="submit" class="button button-energized button-block">Save profile</button>
	    	</form>
	    	<!-- /form#register -->

    	</div>
    </ion-content>
</ion-view>